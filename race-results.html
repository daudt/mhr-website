<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mile High Runners Race Results - See our team's achievements and racing highlights">
    <meta name="keywords" content="running, Colorado, Erie, training, running group, Mile High Runners, race results">
    <title>Race Results | Mile High Runners</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Montserrat:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="main-header">
        <nav class="nav-container">
            <div class="logo">
                <a href="index.html"><img src="images/MHR_Logo_Small.png" alt="Mile High Runners Logo"></a>
            </div>
            <button class="mobile-menu-btn" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="calendar.html">Calendar</a></li>
                <li><a href="meet-coach.html">Meet the Coach</a></li>
                <li><a href="membership.html">Membership</a></li>
                <li><a href="race-results.html">Race Results</a></li>
                <li><a href="sponsors.html">Sponsors</a></li>
                <li><a href="contact.html" class="cta-button">Contact Us</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="page-hero">
            <div class="page-hero-content">
                <h1>Race Results</h1>
            </div>
        </section>

        <section class="race-results-section">
            <div class="content-container">
                <p class="intro-text">Check out some of our team's recent race achievements and highlights! Our runners compete in everything from local 5Ks to marathons and ultra races across Colorado and beyond.</p>

                <div class="race-results-tabs">
                    <div class="tab-navigation" id="tab-navigation">
                        <!-- Tabs will be generated dynamically -->
                    </div>

                    <div id="tab-content-container">
                        <!-- Tab content will be generated dynamically -->
                    </div>
                </div>

                <div class="results-gallery">
                    <div class="result-card">
                        <img src="images/1st-place-768x1024.jpg" alt="First Place Finish">
                        <div class="result-info">
                            <h3>First Place!</h3>
                            <p>Amazing performance by one of our runners</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/Brighton-TT-2024-Dale-Bobby-768x1024.jpg" alt="Brighton Time Trial 2024 - Dale and Bobby">
                        <div class="result-info">
                            <h3>Brighton Time Trial 2024</h3>
                            <p>Dale and Bobby crushing it!</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/Brighton-TT-2024-Jan-768x1024.jpg" alt="Brighton Time Trial 2024 - Jan">
                        <div class="result-info">
                            <h3>Brighton Time Trial 2024</h3>
                            <p>Jan showing strong form</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/Post-CM-768x1024.jpg" alt="Post City Marathon">
                        <div class="result-info">
                            <h3>City Marathon</h3>
                            <p>Post-race celebration</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/PXL_20240106_145308906-1024x824.jpg" alt="Race Day 2024">
                        <div class="result-info">
                            <h3>Race Day 2024</h3>
                            <p>Team spirit at its finest</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/Ragnar-2024-1024x768.jpg" alt="Ragnar Relay 2024">
                        <div class="result-info">
                            <h3>Ragnar Relay 2024</h3>
                            <p>Our team conquered the Ragnar challenge!</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/PHOTO-2024-02-04-11-29-00-576x1024.jpg" alt="February 2024 Race">
                        <div class="result-info">
                            <h3>February 2024</h3>
                            <p>Winter racing success</p>
                        </div>
                    </div>

                    <div class="result-card">
                        <img src="images/PHOTO-2024-01-06-09-16-14.jpg" alt="January 2024 Event">
                        <div class="result-info">
                            <h3>January 2024</h3>
                            <p>Starting the year strong</p>
                        </div>
                    </div>
                </div>

                <div class="results-cta">
                    <h2>Want to be part of our success stories?</h2>
                    <p>Join Mile High Runners and achieve your racing goals with our supportive team!</p>
                    <a href="membership.html" class="primary-button">Join Us Today</a>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="https://www.facebook.com/milehighrunners" target="_blank" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                    <a href="https://www.instagram.com/milehighrunners" target="_blank" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="meet-coach.html">About Us</a></li>
                    <li><a href="contact.html">Contact</a></li>
                    <li><a href="privacy.html">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact Info</h3>
                <p>Doug Croft</p>
                <p>Erie, Colorado</p>
                <p><a href="contact.html">Contact Us</a></p>
                <p><a href="tel:303-396-5650">303-396-5650</a></p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Mile High Runners. All rights reserved.</p>
        </div>
    </footer>

    <script src="main.js"></script>
    <script>
        // Initialize the race results page
        initializeRaceResults();

        async function initializeRaceResults() {
            try {
                // Fetch the list of available years
                const response = await fetch('data/race-results/years.json');
                if (!response.ok) {
                    console.error('Could not load years manifest');
                    return;
                }

                const years = await response.json();
                
                // Generate tabs
                generateTabs(years);
                
                // Set up tab switching functionality
                setupTabSwitching();
                
                // Load data for the first (most recent) year
                if (years.length > 0) {
                    loadYearData(years[0]);
                }
            } catch (error) {
                console.error('Error initializing race results:', error);
            }
        }

        function generateTabs(years) {
            const tabNav = document.getElementById('tab-navigation');
            const tabContentContainer = document.getElementById('tab-content-container');
            
            years.forEach((year, index) => {
                // Create tab button
                const button = document.createElement('button');
                button.className = 'tab-button' + (index === 0 ? ' active' : '');
                button.setAttribute('data-year', year);
                button.textContent = year;
                tabNav.appendChild(button);
                
                // Create tab content
                const content = document.createElement('div');
                content.className = 'tab-content' + (index === 0 ? ' active' : '');
                content.id = 'year-' + year;
                content.innerHTML = '<p>Loading ' + year + ' results...</p>';
                tabContentContainer.appendChild(content);
            });
        }

        function setupTabSwitching() {
            document.querySelectorAll('.tab-button').forEach(button => {
                button.addEventListener('click', function() {
                    // Remove active class from all buttons and content
                    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const year = this.getAttribute('data-year');
                    document.getElementById('year-' + year).classList.add('active');
                    
                    // Load data for this year
                    loadYearData(year);
                });
            });
        }

        async function loadYearData(year) {
            const container = document.getElementById('year-' + year);
            
            // Skip if already loaded (has more than just loading text)
            if (container.querySelectorAll('p').length > 1) {
                return;
            }

            try {
                const response = await fetch(`data/race-results/${year}.json`);
                
                if (!response.ok) {
                    // Special handling for 2022 to show "TBD" instead of "No results available"
                    if (year === '2022') {
                        container.innerHTML = '<p>TBD</p>';
                    } else {
                        container.innerHTML = '<p>No results available for this year.</p>';
                    }
                    return;
                }

                const races = await response.json();
                
                if (!races || races.length === 0) {
                    container.innerHTML = '<p>No results available for this year.</p>';
                    return;
                }

                // Sort races by date (most recent first)
                races.sort((a, b) => new Date(b.date) - new Date(a.date));

                let html = '';
                races.forEach(race => {
                    const raceDate = new Date(race.date);
                    const dateStr = raceDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric' });

                    html += `<p><strong>${race.event_name} – ${dateStr}</strong>`;

                    race.results.forEach((result, index) => {
                        if (index > 0) html += '<br>';
                        html += result.runner;
                        if (result.placement) html += ` – ${result.placement}`;
                        if (result.division) html += ` ${result.division}`;
                        if (result.time) html += ` – ${result.time}`;
                    });

                    html += '</p>';
                });

                container.innerHTML = html;
            } catch (error) {
                console.error('Error loading race results:', error);
                container.innerHTML = '<p>Error loading results. Please try again later.</p>';
            }
        }
    </script>
</body>
</html>